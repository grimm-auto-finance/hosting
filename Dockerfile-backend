FROM gradle:jdk11 AS builder

WORKDIR /usr/src/server
COPY . .

RUN gradle build

FROM openjdk:11

WORKDIR $JAVA_HOME/lib
COPY --from=builder /usr/src/server/build/libs/backend-1.0-SNAPSHOT.jar ./backend.jar

ENTRYPOINT ["java", "-jar", "backend.jar"]
